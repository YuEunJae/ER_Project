<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.erproject.csboard.mapper.CsBoardMapper">
  
  	<insert id="noticeRegist">
  		insert into NOTICE(NOTICE_NO, NOTICE_WRITER, NOTICE_TITLE, NOTICE_CONTENT, NOTICE_VIEW)
  					VALUES(NOTICE_SEQ.NEXTVAL, #{notice_Writer}, #{notice_Title}, #{notice_Content}, #{notice_View})
  	</insert>
  	
  	<insert id="faqRegist">
  		insert into FAQ(FAQ_NO, FAQ_WRITER, FAQ_TITLE, FAQ_CONTENT, FAQ_MAINCATEGORI)
  					VALUES(FAQ_SEQ.NEXTVAL, #{faq_Writer}, #{faq_Title}, #{faq_Content}, #{faq_MainCategori})
  	</insert>
  	
  	<select id="noticeGetList" resultType="NoticeVO">
  		<![CDATA[
  		select a.notice_No,
  			   a.notice_Writer,
  			   a.notice_Title,
  			   a.notice_Content,
  			   a.notice_View,
  			   case when gap <= 60 THEN '방금전'
  			        when gap <= 60 * 24 THEN trunc( gap / 60 ) || '시간전'
  			   else to_char(notice_regdate, 'YYYY-MM-DD')
  			   end as notice_Regdate
  		 from ( select notice_no, notice_writer, notice_title, notice_content, notice_view, notice_regdate, trunc( (sysdate - notice_regdate) * 24 * 60 ) as gap
  				from notice 
  				order by
  		]]>
  			<if test="orderType == 'latestOrder'">notice_no</if>
  			<if test="orderType == '' or orderType == null">notice_no</if>
  			<if test="orderType == 'viewOrder'">notice_view</if>
  		<![CDATA[
  		  desc ) a
  		]]>
  	</select>
  	
  	<select id="faqGetList" resultType="FaqVO">
  		<![CDATA[
  		select a.faq_No,
  			   a.faq_Writer,
  			   a.faq_Title,
  			   a.faq_Content,
  			   a.faq_View,
  			   case when gap <= 60 THEN '방금전'
  			        when gap <= 60 * 24 THEN trunc( gap / 60 ) || '시간전'
  			   else to_char(faq_regdate, 'YYYY-MM-DD')
  			   end as faq_Regdate
  		from ( select faq_no, faq_writer, faq_title, faq_content, faq_view, faq_maincategori, faq_Regdate, trunc( (sysdate - faq_regdate) * 24 * 60 ) as gap
  				from faq
  				where
  		]]>
  			<if test="listOrder == 'login'">faq_maincategori = 'login'</if>
  			<if test="listOrder == 'product'">faq_maincategori = 'product'</if>
  			<if test="listOrder == 'rental'">faq_maincategori = 'rental'</if>
  			<if test="listOrder == 'review'">faq_maincategori = 'review'</if>
  			<if test="listOrder == '' or listOrder == null">1 = 1</if>
  		<![CDATA[		
  				order by
  		]]>
  			<if test="orderType == 'latestOrder'">faq_no</if>
  			<if test="orderType == '' or orderType == null">faq_no</if>
  			<if test="orderType == 'viewOrder'">faq_view</if>
  		<![CDATA[
  			desc ) a
  		]]>
  	</select>
  
  </mapper>